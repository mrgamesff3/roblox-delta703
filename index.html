<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù†ÙØ° Ø§Ù„Ø´Ø±ÙˆØ·</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Cinzel+Decorative:wght@700&display=swap" rel="stylesheet">

<style>
/* --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© --- */
* { box-sizing: border-box; margin:0; padding:0; }

body {
  font-family: 'Cairo', 'Tahoma', sans-serif;
  /* Ø®Ù„ÙÙŠØ© ÙƒØ±ÙŠØ³Ù…Ø§Ø³ Ù…ØªØ¯Ø±Ø¬Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
  background: radial-gradient(circle at center, #330000, #0f2e0f, #000000);
  color: #fffaf0; /* Ù„ÙˆÙ† ÙƒØ±ÙŠÙ…ÙŠ ÙØ§ØªØ­ Ù„Ù„Ù†Øµ */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow-x: hidden;
  padding: 20px 0;
  position: relative;
}

/* --- ØªØ£Ø«ÙŠØ± ØªØ³Ø§Ù‚Ø· Ø§Ù„Ø«Ù„Ø¬ --- */
.snow-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    overflow: hidden;
}
.snow {
    position: absolute;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: snowfall linear infinite;
}
@keyframes snowfall {
    0% { transform: translateY(-10vh) translateX(0); opacity: 1; }
    100% { transform: translateY(110vh) translateX(20px); opacity: 0.3; }
}

/* --- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
.page-container {
  width: 95%;
  max-width: 600px;
  /* Ø®Ù„ÙÙŠØ© Ø´Ø¨Ù‡ Ø´ÙØ§ÙØ© Ø¨ØªØ£Ø«ÙŠØ± Ø²Ø¬Ø§Ø¬ÙŠ Ù…Ø«Ù„Ø¬ */
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border-radius: 25px;
  padding: 30px 25px;
  /* Ø­Ø¯ÙˆØ¯ Ø°Ù‡Ø¨ÙŠØ© Ù…ØªÙ„Ø£Ù„Ø¦Ø© */
  border: 2px solid rgba(255, 215, 0, 0.5);
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.3), 
              inset 0 0 20px rgba(255, 215, 0, 0.2);
  position: relative;
  overflow: hidden;
}
/* Ø¥Ø¶Ø§ÙØ© Ø²ÙŠÙ†Ø© ÙÙŠ Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
.page-container::before {
    content: 'â„ï¸';
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 25px;
    opacity: 0.5;
}
.page-container::after {
    content: 'ğŸ';
    position: absolute;
    bottom: 10px;
    right: 10px;
    font-size: 25px;
    opacity: 0.5;
}

/* --- ØªØ¹Ø¯ÙŠÙ„ Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© --- */
.top-image-container {
  width: 100%;
  border-radius: 15px;
  margin-bottom: 25px;
  overflow: hidden;
  border: 3px solid #c0a062;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
  background-color: #000;
}

/* --- ØªØ¹Ø¯ÙŠÙ„ Ø®ØµØ§Ø¦Øµ Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§ --- */
.top-image-container img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
  transition: transform 0.5s ease;
}

/* --- Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† --- */
h2 {
  font-family: 'Cinzel Decorative', cursive;
  font-size: 24px;
  margin-bottom: 20px;
  color: #ffd700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), 0 0 10px #ff4500;
  text-align: center;
  line-height: 1.4;
}

/* --- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… --- */
.progress-container {
  width: 100%;
  height: 24px;
  background-color: #2a0a0a;
  border-radius: 15px;
  overflow: hidden;
  border: 2px solid #c0a062;
  margin-bottom: 30px;
  position: relative;
}
.progress-bar {
  height: 100%;
  width: 0%;
  background: repeating-linear-gradient(
    45deg,
    #b30000,
    #b30000 10px,
    #ffffff 10px,
    #ffffff 20px
  );
  background-size: 28px 28px;
  transition: width 0.5s ease;
  border-radius: 15px;
  animation: moveStripe 1s linear infinite;
  box-shadow: 0 0 10px #ff0000;
}
@keyframes moveStripe {
    0% { background-position: 0 0; }
    100% { background-position: 28px 0; }
}

/* --- Ø§Ù„Ø®Ø·ÙˆØ§Øª (Ø§Ù„Ø£Ø²Ø±Ø§Ø±) --- */
.step {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: linear-gradient(145deg, #660000, #3d0000);
  border: 2px solid #c0a062;
  border-radius: 18px;
  padding: 18px 20px;
  margin: 15px auto;
  width: 100%;
  box-shadow: 0 4px 15px rgba(0,0,0,0.4);
  opacity: 0;
  pointer-events: none;
  transform: translateY(15px);
  transition: all 0.4s ease;
  font-size: 17px;
  position: relative;
  overflow: hidden;
}

.step::before {
  content: '';
  position: absolute;
  top: 0;
  left: -50%;
  width: 100%;
  height: 100%;
  background: linear-gradient(to right, transparent, rgba(255,215,0,0.2), transparent);
  transform: skewX(-25deg);
  transition: 0.7s;
  pointer-events: none;
}

.step a {
  position: relative;
  z-index: 2;
}

.step.active:hover::before { left: 100%; }
.step.active { opacity: 1; pointer-events: auto; transform: translateY(0); }

/* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© */
.step.completed {
  background: linear-gradient(145deg, #0f4d0f, #002900);
  border-color: #00ff00;
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
}
.step.completed span { color: #a9ffcb; }

.step span { text-align: right; font-size: inherit; font-weight: bold; }
.check { font-size: 24px; color: #ffd700; transition: transform 0.3s ease; }
.step.completed .check { text-shadow: 0 0 10px #00ff00; }

a { color: #fffaf0; text-decoration: none; display: flex; align-items: center; width: 100%; justify-content: space-between; }
a:hover { color: #ffd700; }

/* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
.loading {
  display: inline-block;
  width: 20px; height: 20px;
  border: 3px solid rgba(255,215,0,0.3);
  border-top: 3px solid #ffd700;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* --- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£Ø®ÙŠØ± --- */
.final-section { margin-top: 35px; text-align: center; }
.final-message {
    font-size: 19px;
    margin-bottom: 15px;
    color: #ff4d4d;
    font-weight: bold;
    text-shadow: 0 0 5px #ff0000;
}

.final-buttons {
  background: rgba(0,0,0,0.3);
  border-radius: 18px;
  border: 2px solid #c0a062;
  padding: 15px;
  width: 100%;
  position: relative;
}
.final-buttons::before {
    content: 'ğŸ€';
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 30px;
}

.final-buttons a {
  display: block;
  background: linear-gradient(to bottom, #555, #333);
  color: #aaa;
  padding: 16px;
  border-radius: 14px;
  font-size: 18px;
  font-weight: bold;
  margin: 10px auto;
  pointer-events: none;
  opacity: 0.6;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3);
  text-align: center;
  border: 1px solid #444;
}

.final-buttons a.active {
  background: linear-gradient(to bottom, #d40000, #990000);
  color: #ffd700;
  pointer-events: auto;
  opacity: 1;
  border: 2px solid #ffd700;
  box-shadow: 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.4);
  animation: pulseGift 1.5s infinite;
}
@keyframes pulseGift {
  0% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
  50% { transform: scale(1.02); box-shadow: 0 0 30px rgba(255, 50, 50, 1), 0 0 50px rgba(255, 215, 0, 0.6); }
  100% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
}

.final-buttons a.btn-guide { background: linear-gradient(to bottom, #006600, #004d00) !important; color: #fff !important; border-color: #00ff00;}
.final-buttons a.active:hover { transform: scale(1.05) !important; }

.footer-note {
    margin-top: 20px;
    font-size: 12px;
    color: #c0a062;
    text-align: center;
    opacity: 0.7;
}

@media (max-width: 600px) {
  .final-buttons a, 
  .final-buttons a.btn-guide {
    font-size: 19px !important; 
    padding: 16px 12px !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 1.2 !important; 
    min-height: 65px; 
    width: 100% !important;
    border-radius: 15px !important;
    margin: 15px 0 !important;
  }
  .final-buttons {
    padding: 25px 15px !important;
  }
  .step {
    font-size: 15px; 
    padding: 12px 15px;
  }
}

#copyPopup {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(to right, #d40000, #b30000);
  color: #ffd700;
  padding: 12px 25px;
  border-radius: 12px;
  font-weight: bold;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s;
  z-index: 9999;
  border: 1px solid #ffd700;
}

/* --- ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© --- */
.custom-alert-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}
.custom-alert-overlay.show {
    opacity: 1;
    visibility: visible;
}
.custom-alert-box {
    background: linear-gradient(145deg, #2a0a0a, #440000);
    border: 2px solid #c0a062;
    padding: 25px 30px;
    border-radius: 20px;
    text-align: center;
    width: 90%;
    max-width: 400px;
    transform: scale(0.8);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.4);
}
.custom-alert-overlay.show .custom-alert-box {
    transform: scale(1);
}
.alert-icon {
    font-size: 50px;
    margin-bottom: 15px;
    animation: bounce 1s infinite;
}
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
.alert-title {
    color: #ffd700;
    font-size: 22px;
    margin-bottom: 10px;
    font-family: 'Cinzel Decorative', cursive;
}
.alert-text {
    color: #fff;
    font-size: 16px;
    margin-bottom: 20px;
    line-height: 1.5;
}
.alert-btn {
    background: linear-gradient(to bottom, #c0a062, #94703a);
    border: none;
    color: #2a0a0a;
    padding: 10px 25px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s;
}
.alert-btn:hover {
    transform: scale(1.05);
    background: linear-gradient(to bottom, #ffd700, #c0a062);
}

</style>

</head>
<body>
  <div class="snow-container">
      <div class="snow" style="left: 10%; animation-duration: 5s;"></div>
      <div class="snow" style="left: 30%; animation-duration: 7s;"></div>
      <div class="snow" style="left: 50%; animation-duration: 4s;"></div>
      <div class="snow" style="left: 70%; animation-duration: 6s;"></div>
      <div class="snow" style="left: 90%; animation-duration: 5.5s;"></div>
  </div>

  <div class="page-container">
    <div class="top-image-container">
      <img src="https://i.postimg.cc/mgCNsMpb/1.jpg" alt="Free Fire Script" id="mainImage" />
    </div>

    <h2>ğŸ„ Ù†ÙØ° Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø£ÙˆÙ„Ø§Ù‹ Ù„ÙƒÙŠ ÙŠØªÙ… ÙØªØ­ Ù„Ùƒ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ ğŸ…</h2>

    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <div id="step1" class="step active">
      <a href="#" onclick="completeStep(1, 'https://www.youtube.com/@MRGAMESFF-k3q'); return false;">
        <span>ğŸ“ºğŸ”” Ø§Ø¶ØºØ· Ù‡Ù†Ø§ ÙˆÙ‚Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© 1 ÙˆØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¬Ø±Ø³</span>
        <span id="check1" class="check">â¡ï¸</span>
      </a>
    </div>

    <div id="step2" class="step">
      <a href="#" onclick="completeStep(2, 'https://youtu.be/OfP1CgXp6Bk'); return false;">
        <span>ğŸ“ºâ–¶ï¸ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ ÙˆØ´Ø§Ù‡Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù‡Ø°Ø§ ÙƒØ§Ù…Ù„Ø§ Ø¹Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</span>
        <span id="check2" class="check">â¡ï¸</span>
      </a>
    </div>    

    <div id="step3" class="step">
      <a href="#" onclick="completeStep(3, null); return false;">
        <span>ğŸ‘ğŸ’¬ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ ÙˆÙ‚Ù… Ø¨Ø¹Ù…Ù„ Ù„Ø§ÙŠÙƒ ÙˆØªØ¹Ù„ÙŠÙ‚ Ù…Ù…ÙŠØ² Ù„Ù„ÙÙŠØ¯ÙŠÙˆ Ù‡Ø°Ø§</span>
        <span id="check3" class="check">â¡ï¸</span>
      </a>
    </div>

    <div id="step4" class="step">
      <a href="#" onclick="completeStep(4, 'https://www.youtube.com/@MRGAMESFFV2'); return false;">
        <span>ğŸ“ºğŸ”” Ø§Ø¶ØºØ· Ù‡Ù†Ø§ ÙˆÙ‚Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© 2 ÙˆØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¬Ø±Ø³</span>
        <span id="check4" class="check">â¡ï¸</span>
      </a>
    </div>

    <div class="final-section">
      <div id="finalMessage" class="final-message">âŒ Ù†ÙÙ‘Ø° Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø£ÙˆÙ„Ø§Ù‹ Ù„ÙƒÙŠ ÙŠØªÙ… ÙØªØ­ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„</div>
      <div class="final-buttons">
        <a id="btnDownload" href="https://xdabo.com/9Lnnv7" onclick="goToDownload(); return false;">ğŸ…ğŸ Ù„ØªØ­Ù…ÙŠÙ„ Ù‡Ø§Ùƒ Ø¯Ù„ØªØ§ Ø§Ø®Ø± Ø§ØµØ¯Ø§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ 703 Ø§Ø¶ØºØ· Ù‡Ù†Ø§</a>
      </div>
      <p class="footer-note">Â© 2025 Happy New Year & Merry Christmas</p>
    </div>
  </div>

  <div id="copyPopup">ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­! ğŸ„</div>

  <div id="customAlert" class="custom-alert-overlay">
    <div class="custom-alert-box">
        <div class="alert-icon">âš ï¸</div>
        <div class="alert-title">Ø¹Ù€Ù€Ù€Ø°Ø±Ø§Ù‹!</div>
        <p id="customAlertMsg" class="alert-text">ÙŠÙˆØ¬Ø¯ Ø®Ø·Ø£ Ù…Ø§...</p>
        <button id="alertCloseBtn" class="alert-btn">Ø­Ø³Ù†Ø§Ù‹ØŒ ÙÙ‡Ù…Øª</button>
    </div>
  </div>

  <script>
    document.getElementById("mainImage").addEventListener("contextmenu", function(e){ e.preventDefault(); });

    // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· ---
    const STEP_EXPIRY_MS = 365 * 24 * 60 * 60 * 1000;
    const step3Links = ["https://youtu.be/OfP1CgXp6Bk"];

    // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø·ÙˆØ§Øª (Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„) ---
    const stepsConfig = {
        1: { required: 8, blocking: 4, msg: "âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© 1 ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø±Ø³.\nğŸ’¡ Ø§Ø°Ø§ ÙƒÙ†Øª Ù…Ø´ØªØ±ÙƒØ§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ø§Ù†ØªØ¸Ø± 6 Ø«ÙˆØ§Ù†ÙŠ Ø«Ù… Ø¹Ø¯.", storageKey: "s1_pending_start" },
        2: { required: 35, blocking: 8, msg: "âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒØ§Ù…Ù„Ø§Ù‹.", storageKey: "s2_pending_start" },
        3: { required: 12, blocking: 7, msg: "âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¹Ù…Ù„ Ù„Ø§ÙŠÙƒ ÙˆØªØ¹Ù„ÙŠÙ‚ Ù…Ù…ÙŠØ².", storageKey: "s3_pending_start" },
        4: { required: 8, blocking: 4, msg: "âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© 2 ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¬Ø±Ø³.\nğŸ’¡ Ø§Ø°Ø§ ÙƒÙ†Øª Ù…Ø´ØªØ±ÙƒØ§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ø§Ù†ØªØ¸Ø± 6 Ø«ÙˆØ§Ù†ÙŠ Ø«Ù… Ø¹Ø¯.", storageKey: "s4_pending_start" }
    };

    // --- Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ®Ø²ÙŠÙ† (Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©) ---
    const completedKeys = {
        1: "step1State_v1_done",
        2: "step2State_v2_done",
        3: "step3State_v3_done",
        4: "step4State_v4_done"
    };

    // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ---
    function isCompleted(step) {
        const data = JSON.parse(localStorage.getItem(completedKeys[step]) || "{}");
        return data.completed === true;
    }

    function markCompleted(step) {
        localStorage.setItem(completedKeys[step], JSON.stringify({ completed: true, timestamp: Date.now() }));
        // Ø­Ø°Ù Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø¤Ù‚ØªØ© Ù„Ø£Ù† Ø§Ù„Ø´Ø±Ø· ØªØ­Ù‚Ù‚
        localStorage.removeItem(stepsConfig[step].storageKey);
    }

    // --- Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ---
    window.onload = () => {
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
        for(let i=1; i<=4; i++) {
            if(isCompleted(i)) {
                applyVisualSuccess(i);
                activateNext(i);
            }
        }
        unlockButtons();
        updateProgressBar();
        
        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©
        let firstIncomplete = null;
        for(let i=1; i<=4; i++){
            if(!isCompleted(i)){ firstIncomplete = document.getElementById("step"+i); break; }
        }
        if(firstIncomplete){ setTimeout(()=>{ firstIncomplete.scrollIntoView({behavior:"smooth", block:"center"}); }, 600); }
        
        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
        document.addEventListener("visibilitychange", checkAllPendingSteps);
    };

    function applyVisualSuccess(step) {
        const stepEl = document.getElementById("step"+step);
        const checkEl = document.getElementById("check"+step);
        if(stepEl) stepEl.classList.add("completed");
        if(checkEl) checkEl.innerText = "âœ…";
    }

    function activateNext(step) {
        const next = step + 1;
        if(document.getElementById("step"+next)) {
            document.getElementById("step"+next).classList.add("active");
        }
    }

    // --- Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¶ØºØ· (Ù…Ø­Ø¯Ø«Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) ---
    function completeStep(step, url) {
        // 1. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙƒØªÙ…Ù„Ø©ØŒ Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙ‚Ø·
        if(isCompleted(step)) {
            openLink(step, url);
            return;
        }

        // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†: Ù‡Ù„ Ø¶ØºØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ù‚Ø¨Ù„ØŸ
        const config = stepsConfig[step];
        const savedStart = localStorage.getItem(config.storageKey);

        if (savedStart) {
            // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¶ØºØ· Ø³Ø§Ø¨Ù‚Ø§Ù‹.. Ù‡Ù„ Ù…Ø± Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙƒØ§ÙÙŠØŸ
            const elapsed = (Date.now() - parseInt(savedStart)) / 1000;
            
            if (elapsed >= config.required) {
                // Ù†Ø¹Ù… Ù…Ø± Ø§Ù„ÙˆÙ‚Øª -> Ù†Ø¬Ø§Ø­
                finishStep(step);
                return; // Ù„Ø§ ØªÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
            } else if (elapsed < config.blocking) {
                 // Ù„Ù… ÙŠÙ…Ø± ÙˆÙ‚Øª Ø§Ù„Ø­Ø¸Ø± -> Ø®Ø·Ø£
                 showCustomAlert(config.msg);
                 return;
            } else {
                 // Ù…Ø± ÙˆÙ‚Øª Ø§Ù„Ø­Ø¸Ø± Ù„ÙƒÙ† Ù„Ù… ÙŠÙƒØªÙ…Ù„ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ -> Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ÙŠÙƒÙ…Ù„ Ø§Ù„ÙˆÙ‚Øª
                 // Ø³Ù†Ø³Ù…Ø­ Ø¨ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙØ§Ø¹Ù„
            }
        }

        // 3. Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© (ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹)
        if (!savedStart) {
            localStorage.setItem(config.storageKey, Date.now());
        }
        
        // ØªØ´ØºÙŠÙ„ ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.getElementById("check"+step).innerHTML = '<span class="loading"></span>';
        
        openLink(step, url);
    }

    function openLink(step, url) {
        if (step === 3) {
            const selected = step3Links[Math.floor(Math.random() * step3Links.length)];
            window.open(selected, "_blank");
        } else if (url) {
            window.open(url, "_blank");
        }
    }

    function finishStep(step) {
        if(!isCompleted(step)) {
            markCompleted(step);
            applyVisualSuccess(step);
            activateNext(step);
            unlockButtons();
            updateProgressBar();
            
            const next = step + 1;
            if(document.getElementById("step"+next)) {
                setTimeout(() => { document.getElementById("step"+next).scrollIntoView({behavior:"smooth", block:"center"}); }, 500);
            }
        }
    }

    // --- Ø¯Ø§Ù„Ø© Ø§Ù„ÙØ­Øµ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© ---
    function checkAllPendingSteps() {
        if (document.visibilityState === 'visible') {
            for(let i=1; i<=4; i++) {
                if(!isCompleted(i)) {
                    const config = stepsConfig[i];
                    const savedStart = localStorage.getItem(config.storageKey);
                    if(savedStart) {
                        const elapsed = (Date.now() - parseInt(savedStart)) / 1000;
                        const checkEl = document.getElementById("check"+i);
                        
                        if(elapsed >= config.required) {
                            finishStep(i);
                        } else if (elapsed < config.blocking) {
                            // Ø¥Ø°Ø§ Ø¹Ø§Ø¯ Ø¨Ø³Ø±Ø¹Ø© Ø¬Ø¯Ø§Ù‹ØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ø·Ø¨ÙŠØ¹ØªÙ‡Ø§
                            if(checkEl) checkEl.innerText = "â¡ï¸";
                        }
                    }
                }
            }
        }
    }

    // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ---
    const customAlert = document.getElementById("customAlert");
    const closeBtn = document.getElementById("alertCloseBtn");

    function showCustomAlert(msg) {
        document.getElementById("customAlertMsg").innerText = msg;
        customAlert.classList.add("show");
    }

    function closeCustomAlert() {
        customAlert.classList.remove("show");
    }

    // Ø¯Ø¹Ù… Ø§Ù„Ù„Ù…Ø³ ÙˆØ§Ù„Ù†Ù‚Ø±
    closeBtn.addEventListener("click", closeCustomAlert);
    closeBtn.addEventListener("touchend", function(e) {
        e.preventDefault(); 
        closeCustomAlert();
    });

    // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ---
    function unlockButtons(){
        const allCompleted = [1,2,3,4].every(i => isCompleted(i));
        if(allCompleted){
            document.getElementById("finalMessage").innerText="âœ… ØªÙ… ØªÙ†ÙÙŠØ° ÙƒÙ„ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø¨Ù†Ø¬Ø§Ø­";
            document.getElementById("finalMessage").style.color="#00ff00";
            document.getElementById("finalMessage").style.textShadow="0 0 10px #ffd700";
            document.getElementById("btnDownload").classList.add("active");
            
             if(!document.getElementById("btnGuide")){
                const guideBtn=document.createElement("a");
                guideBtn.id="btnGuide";
                guideBtn.href="https://youtu.be/7lC4HYzDJJ4";
                guideBtn.target="_blank";
                guideBtn.className="btn-guide active";
                guideBtn.innerText="â“ Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ø¶ØºØ· Ù‡Ù†Ø§";
                document.querySelector(".final-buttons").appendChild(guideBtn);
                guideBtn.addEventListener("contextmenu", function(e){ e.preventDefault(); });
             }
        }
    }

    function updateProgressBar(){
        let done=0;
        for(let i=1; i<=4; i++) if(isCompleted(i)) done++;
        document.getElementById("progressBar").style.width=(done/4)*100+"%";
    }

    function goToDownload(){ window.open("https://xdabo.com/9Lnnv7","_blank"); }

    // --- Ø§Ù„Ù†Ø³Ø® ---
    const downloadBtn=document.getElementById("btnDownload");
    const copyPopup=document.getElementById("copyPopup");
    let pressTimer;
    function copyLink(){
      const link=downloadBtn.getAttribute("href");
      navigator.clipboard.writeText(link).then(()=>{
        copyPopup.innerText="âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·: "+link;
        copyPopup.style.opacity=1;
        setTimeout(()=>{ copyPopup.style.opacity=0; },2000);
      }).catch(()=>{
        copyPopup.innerText="âŒ ÙØ´Ù„ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰";
        copyPopup.style.opacity=1;
        setTimeout(()=>{ copyPopup.style.opacity=0; },2000);
      });
    }

    downloadBtn.addEventListener("contextmenu", function(e){ e.preventDefault(); copyLink(); });
    downloadBtn.addEventListener("touchstart", function(e){ downloadBtn.style.backgroundColor="#444"; pressTimer=setTimeout(copyLink,1000); });
    downloadBtn.addEventListener("touchend", function(e){ clearTimeout(pressTimer); downloadBtn.style.backgroundColor=""; });
  </script>
</body>
</html>
